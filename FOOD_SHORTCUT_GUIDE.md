# 음식 사진 분석 아이폰 단축어 설정 가이드

## 📱 단축어 만들기

### 1. 단축어 앱 열기
아이폰에서 **단축어(Shortcuts)** 앱을 엽니다.

### 2. 새 단축어 만들기
1. 우측 상단 **+** 버튼 클릭
2. **작업 추가** 선택

### 3. 사진 선택 작업 추가
1. 검색창에 **"사진 선택"** 입력
2. **사진 선택** 작업 추가
3. 설정:
   - "여러 개 선택" → **끄기**
   - "사진 표시" → **켜기** (선택사항)

### 4. URL 내용 가져오기 작업 추가
1. 검색창에 **"URL 내용 가져오기"** 입력
2. **URL 내용 가져오기** 작업 추가
3. 다음과 같이 설정:

**URL:**
```
https://betterlife-zeta.vercel.app/api/meals/analyze
```

**방법(Method):**
```
POST
```

**헤더(Headers):**
- 헤더 추가 없음 (multipart/form-data는 자동 설정됨)

**요청 본문(Request Body):**
- 유형: **양식(Form)**
- 다음 필드 추가:

| 필드명 | 값 | 설명 |
|--------|-----|------|
| `image` | **사진** (변수 선택) | 위에서 선택한 사진 |
| `timestamp` | **현재 날짜** (변수 선택) | ISO 8601 형식 |
| `user_id` | `taeahn` (텍스트) | 사용자 ID |

**timestamp 필드 설정 방법:**
1. "Add new field" 클릭
2. 키: `timestamp`
3. 값 필드를 길게 눌러 **변수 선택** → **현재 날짜**
4. 날짜 포맷: **ISO 8601** 또는 **사용자 설정** → `yyyy-MM-dd'T'HH:mm:ssZZZZZ`

### 5. 결과 표시 (선택사항)
분석 결과를 확인하려면:
1. 검색창에 **"알림 표시"** 입력
2. **알림 표시** 작업 추가
3. 내용: **URL 내용** (변수 선택)

### 6. 단축어 이름 설정
1. 상단의 "새로운 단축어" 클릭
2. 이름 변경: **"음식 분석"** 또는 원하는 이름

### 7. 완료
우측 상단 **완료** 버튼 클릭

---

## 🎯 사용 방법

### 방법 1: 단축어 앱에서 실행
1. 단축어 앱 열기
2. "음식 분석" 단축어 클릭
3. 사진 선택
4. 자동으로 분석 후 저장

### 방법 2: 공유 시트에서 실행
1. 사진 앱에서 음식 사진 선택
2. 공유 버튼 클릭
3. "음식 분석" 단축어 선택

### 방법 3: Action Button에 할당 (iPhone 15 Pro 이상)
1. **설정** → **동작 버튼**
2. **단축어** 선택
3. "음식 분석" 단축어 선택
4. 이제 Action Button을 누르면 바로 실행!

---

## 📊 분석 결과 확인

웹사이트 https://betterlife-zeta.vercel.app 에서:
- **식사 기록** 섹션에서 분석된 데이터 확인
- 칼로리, 탄단지, 음식명 등 자동으로 표시
- 날짜별로 정리되어 표시

---

## ⚠️ 문제 해결

### "The network connection was lost" 오류
- 인터넷 연결 확인
- URL이 정확한지 확인
- 필드명이 정확한지 확인 (`image`, `timestamp`, `user_id`)

### 분석이 느린 경우
- Gemini API가 이미지를 분석하는 데 5-10초 소요될 수 있음
- 인내심을 가지고 기다려주세요

### 분석 결과가 부정확한 경우
- 음식이 명확하게 보이는 사진 사용
- 조명이 좋은 환경에서 촬영
- 음식이 화면 중앙에 오도록 촬영

---

## 🎨 단축어 아이콘 커스터마이징

1. 단축어 우측 상단 **...** 클릭
2. **세부사항** 선택
3. 아이콘과 색상 변경 가능
